<!DOCTYPE html>
<html lang="eng">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrations</title>
    <link rel="icon" type="image/png" href="../assets/EduCare Logo.png" />
    <link rel="stylesheet" href="../registrations/Registrations-style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
</head>
</head>

<body>
    <div class="info">
        <h1>Registrations</h1>
    </div>
    <div class="back">
        <a href="../Student-portal/Student-Portal.html">
            <i class="fas fa-arrow-left">back </i>
        </a>
    </div>

    <div class="coursesbody">
        <div class="registration-container">
            <h3>Biometric <br> Registration</h3>
            <div id="result"><i class="fas fa-times"></i></div>
        </div>
        <a href="/courses/Course.html">
            <div class="registration-container">
                <h3>Course <br> Registration</h3>
                <div id="course-result"><i class="fas fa-times"></i></div>
            </div>
        </a>

        <div class="registration-container">
            <h3>Medical <br> Registration</h3>
            <div id="medical-result"><i class="fas fa-times"></i></div>
        </div>

    </div>
    <script src="../course-JS.js"></script>
    <script>
        const API_BASE = "https://educare-students-hub-eadz.onrender.com";
        
        document.addEventListener('DOMContentLoaded', async () => {
            const studentId = localStorage.getItem('studentId');

            try {
                const res = await fetch(`${API_BASE}/registration-status/${studentId}`);
                const data = await res.json();

                const courseIcon = document.querySelector('#course-result i');
                if (data.registeredCourses.length > 0) {
                    courseIcon.classList.remove('fa-times');
                    courseIcon.classList.add('fa-check-circle');
                }

                const medicalIcon = document.querySelector('#medical-result i');
                if (data.medicalRegistered) {
                    medicalIcon.classList.remove('fa-times');
                    medicalIcon.classList.add('fa-check-circle');
                }

                const biometricIcon = document.querySelector('#result i');
                if (data.biometricRegistered) {
                    biometricIcon.classList.remove('fa-times');
                    biometricIcon.classList.add('fa-check-circle');
                }
            } catch (err) {
                console.error("‚ùå Failed to load registration status:", err);
            }
        });
    </script>
</body>

</html>
